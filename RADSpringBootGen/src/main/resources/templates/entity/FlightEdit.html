<!--  
 * Copyright 2018 by RADical Information Design Corporation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 *  Generated by RADSpringBootGen from Edit.html.template.java.txt
-->  
<html layout:decorator="layout">
  <div layout:fragment="content">

    <form method="post" name="comment_form" id="comment_form" th:action="${formAction}" modelAttribute="flight" role="form">    
      <table class="table table-striped" id="flight_edit">
        <thead> 
          <tr>
        <i th:text="${message}"></i>
        <th><h3>Edit Flight</h3></th>
        <th></th>
        </tr>
        </thead>
        <tbody>
        <div class="form-group">
                    <tr>
            <td><label for="shortName">Short Name</label></td>
            <td><input type="text" id="shortName" size="40" name="shortName" th:value="${flight.shortName}"/></td>
          </tr>

                    <tr>
            <td><label for="longName">Long Name</label></td>
            <td><input type="text" id="longName" size="40" name="longName" th:value="${flight.longName}"/></td>
          </tr>

                    <tr>
            <td><label for="departureDateTime">Departure Date Time</label></td>
            <td><input type="datetime-local" id="departureDateTime" size="12" name="departureDateTime" th:value="${flight.departureDateTime}"/></td>
          </tr>

                    <tr>
            <td><label for="arrivalDateTime">Arrival Date Time</label></td>
            <td><input type="datetime-local" id="arrivalDateTime" size="12" name="arrivalDateTime" th:value="${flight.arrivalDateTime}"/></td>
          </tr>

                    <tr>
            <td><label for="notes">Notes</label></td>
            <td><textarea rows="1" id="notes" name="notes" cols="40" th:text="${flight.notes}"/></td>
          </tr>

                    <tr>
            <td><label for="aircraftId">Aircraft</label></td>
            <td>
            <select th:field="*{flight.aircraftId}">
            <option value="0">[Please select...]</option>
            <option th:each="aircraft : ${aircrafts}" 
                    th:value="${aircraft.aircraftId}" 
                    th:text="${aircraft}">null</option>
            </select>
                        <button data-btn="aircraftId-edit" th:attr="data-aircraftId=${flight.aircraftId}==null?0:${flight.aircraftId.aircraftId}" type="SUBMIT" class="frmEdit" NAME="frmEdit" VALUE="View/Edit Aircraft">
                        <span class="fa-stack">
                            <i class="glyphicon glyphicon-edit"></i>
                        </span>
                        </button>
            </td>
          </tr>

                    <tr>
            <td><label for="airportIdDeparture">Departure Airport</label></td>
            <td>
            <select th:field="*{flight.airportIdDeparture}">
            <option value="0">[Please select...]</option>
            <option th:each="airport : ${airports}" 
                    th:value="${airport.airportId}" 
                    th:text="${airport}">null</option>
            </select>
                        <button data-btn="airportIdDeparture-edit" th:attr="data-airportIdDeparture=${flight.airportIdDeparture}==null?0:${flight.airportIdDeparture.airportId}" type="SUBMIT" class="frmEdit" NAME="frmEdit" VALUE="View/Edit Airport">
                        <span class="fa-stack">
                            <i class="glyphicon glyphicon-edit"></i>
                        </span>
                        </button>
            </td>
          </tr>

                    <tr>
            <td><label for="airportIdDestination">Destination Airport</label></td>
            <td>
            <select th:field="*{flight.airportIdDestination}">
            <option value="0">[Please select...]</option>
            <option th:each="airport : ${airports}" 
                    th:value="${airport.airportId}" 
                    th:text="${airport}">null</option>
            </select>
                        <button data-btn="airportIdDestination-edit" th:attr="data-airportIdDestination=${flight.airportIdDestination}==null?0:${flight.airportIdDestination.airportId}" type="SUBMIT" class="frmEdit" NAME="frmEdit" VALUE="View/Edit Airport">
                        <span class="fa-stack">
                            <i class="glyphicon glyphicon-edit"></i>
                        </span>
                        </button>
            </td>
          </tr>

          
        </div>
        <input type="hidden" th:field="${flight.flightId}"/>
        <button type="submit" id="submit" class="btn btn-primary">Save</button> 
        <a class="btn btn-primary" th:href="@{'{list}'(list=${listPath})}">Cancel/Return</a>
        <button data-btn="flight-refresh" th:attr="data-flightId=${flight.flightId}" type="SUBMIT" class="btn btn-primary" NAME="frmRefresh" VALUE="Refresh (Discard Changes)">Discard Changes/Refresh</button>
        </tbody>
      </table>
      
<HR />
      <table class="table table-hover">
        <thead>
          <tr>
            <td colspan="5"><h4>Flight Crew Members</h4></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td class="spacer">_</td>
            <th><h5>Pilot</h5></th>
            <th><h5>Notes</h5></th>
            </tr>
        </thead>
        <tbody>
          <tr data-th-each="flightCrewMember : ${flight.flightCrewMemberCollection}">
             
            <td>
              <button data-btn="pilotId-edit" th:attr="data-pilotId=${flightCrewMember.flightCrewMemberPK.pilotId}" 
                      type="SUBMIT" class="frmEdit" NAME="frmEdit" VALUE="View/Edit Pilot">
                <span class="fa-stack">
                  <i class="glyphicon glyphicon-edit"></i>
                </span>
              </button>
            </td>
            <td>
              <button data-btn="flightCrewMember-delete" 
                      th:attr="data-flightId=${flightCrewMember.flightCrewMemberPK.flightId}, data-pilotId=${flightCrewMember.flightCrewMemberPK.pilotId}" 
                      type="SUBMIT" 
                      class="frmDelete" 
                      NAME="frmDelete" 
                      VALUE="Delete Flight Crew Member">
                <span class="fa-stack">
                  <i class="glyphicon glyphicon-trash"></i>
                </span>
              </button>
            </td>
            
            <td></td>
            <td class="pilot" data-th-text="${flightCrewMember.pilot}"></td>
              <input type="hidden" id="flightCrewMemberPilotId" name="flightCrewMemberPilotId" th:value="${flightCrewMember.flightCrewMemberPK}==null?null:${flightCrewMember.flightCrewMemberPK.pilotId}"/>                            
                          <td><textarea rows="1" id="flightCrewMemberNotes" name="flightCrewMemberNotes" cols="40" th:text="${flightCrewMember.notes}"/></td>

        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="spacer">_</td>
        </tr>
        <tr>
          <td colspan="5"><h4>Add a Flight Crew Member</h4></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td class="spacer">_</td>
            <th><h5>Pilot</h5></th>
            <th><h5>Notes</h5></th>
            </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td>
            <select name="flightCrewMemberPilotId">
              <option value="0">[Please select...]</option>
              <option th:each="pilot : ${pilots}" 
                      th:value="${pilot.pilotId}" 
                      th:text="${pilot}">NULL</option>
            </select>                  
          </td>
                          <td><textarea rows="2" id="flightCrewMemberNotes" name="flightCrewMemberNotes" cols="40" text=""/></td>

        </tr>

        </tbody>
      </table>
       

      
      <hr />
      <hr />
      <button type="submit" id="submit" class="btn btn-primary">Save</button>
      <a class="btn btn-primary" th:href="@{'{list}'(list=${listPath})}">Cancel/Return</a>
      <button data-btn="flight-refresh" th:attr="data-flightId=${flight.flightId}" type="SUBMIT" class="btn btn-primary" NAME="frmRefresh" VALUE="Refresh (Discard Changes)">Discard Changes/Refresh</button>
    </form>
    
        
    
    <script>
      $(document).ready(function(){
      
        $("button[data-btn='flight-refresh']").on('click', function(e){
            e.preventDefault();
            var form=document.createElement('form');
            document.body.appendChild(form);
            var input=document.createElement('input');
            input.type='hidden';
            input.name='flightId';
            input.value=$(this).attr('data-flightId');
            form.appendChild(input);
            form.method='post';
            form.action='/Flight/Edit';
            form.submit();
          });
          
        $("button[data-btn='aircraftId-edit']").on('click', function(e){
            e.preventDefault();
            var form=document.createElement('form');
            document.body.appendChild(form);
            var input=document.createElement('input');
            input.type='hidden';
            input.name='aircraftId';
            input.value=$(this).attr('data-aircraftId');
            form.appendChild(input);
            form.method='post';
            form.action='/Aircraft/Edit';
            form.submit();
          });
          $("button[data-btn='airportIdDeparture-edit']").on('click', function(e){
            e.preventDefault();
            var form=document.createElement('form');
            document.body.appendChild(form);
            var input=document.createElement('input');
            input.type='hidden';
            input.name='airportId';
            input.value=$(this).attr('data-airportIdDeparture');
            form.appendChild(input);
            form.method='post';
            form.action='/Airport/Edit';
            form.submit();
          });
          $("button[data-btn='airportIdDestination-edit']").on('click', function(e){
            e.preventDefault();
            var form=document.createElement('form');
            document.body.appendChild(form);
            var input=document.createElement('input');
            input.type='hidden';
            input.name='airportId';
            input.value=$(this).attr('data-airportIdDestination');
            form.appendChild(input);
            form.method='post';
            form.action='/Airport/Edit';
            form.submit();
          });
          

        $("button[data-btn='pilotId-edit']").on('click', function(e){
            e.preventDefault();
            var form=document.createElement('form');
            document.body.appendChild(form);
            var input=document.createElement('input');
            input.type='hidden';
            input.name='pilotId';
            input.value=$(this).attr('data-pilotId');
            form.appendChild(input);
            form.method='post';
            form.action='/Pilot/Edit';
            form.submit();
          });
          
        $("button[data-btn='flightCrewMember-delete']").on('click', function(e){
          e.preventDefault();
          var formDelete=document.createElement('form');
          document.body.appendChild(formDelete);
          
          var flightId=document.createElement('flightId');
          flightId.type='hidden';
          flightId.name='flightId';
          flightId.value=$(this).attr('data-flightId');

          formDelete.appendChild(flightId);
          var pilotId=document.createElement('pilotId');
          pilotId.type='hidden';
          pilotId.name='pilotId';
          pilotId.value=$(this).attr('data-pilotId');

          formDelete.appendChild(pilotId);
          
          
          formDelete.method='post';
          formDelete.action='/Flight/DeleteFlightCrewMember';
          formDelete.submit();
        });
          
          

<!--          var spacers = document.getElementsByClassName('spacer');
          var numSpacers = spacers.length;
          console.log('numSpacers: ', numSpacers);
          console.log('typeof numSpacers: ', typeof numSpacers);
          console.log('spacers: ', spacers);
          for (var i=0; i<numSpacers; i++){
          	console.log('spacers[i] = ', spacers[i]);
            	spacers[i].style.visibility = "hidden";
            }
-->
});
    
    
    </script>

    <script src='/js/flight.js'></script>

  </div>

</html>

